{"version":3,"sources":["options/fields/name.js"],"names":["platform","name","targetUrl","tryToInferName","then","result","length","Promise","resolve","pageTitle","DEFAULT_APP_NAME","catch","error","log","warn"],"mappings":";;;;;;kBAqBe,iBAAwC;AAAA,MAA7BA,QAA6B,SAA7BA,QAA6B;AAAA,MAAnBC,IAAmB,SAAnBA,IAAmB;AAAA,MAAbC,SAAa,SAAbA,SAAa;;AACrD,SAAOC,eAAe,EAAEF,IAAF,EAAQC,SAAR,EAAf,EAAoCE,IAApC,CAAyC,UAACC,MAAD;AAAA,WAC9C,6BAAiBL,QAAjB,EAA2BK,MAA3B,CAD8C;AAAA,GAAzC,CAAP;AAGD,C;;AAzBD;;;;AACA;;AACA;;AACA;;;;AAEA,SAASF,cAAT,OAA6C;AAAA,MAAnBF,IAAmB,QAAnBA,IAAmB;AAAA,MAAbC,SAAa,QAAbA,SAAa;;AAC3C;AACA,MAAID,QAAQA,KAAKK,MAAL,GAAc,CAA1B,EAA6B;AAC3B,WAAOC,QAAQC,OAAR,CAAgBP,IAAhB,CAAP;AACD;;AAED,SAAO,uBAAWC,SAAX,EACJE,IADI,CACC,UAACK,SAAD;AAAA,WAAeA,aAAaC,2BAA5B;AAAA,GADD,EAEJC,KAFI,CAEE,UAACC,KAAD,EAAW;AAChBC,uBAAIC,IAAJ,CACG,gEAA+DJ,2BAAiB,cAAaE,KAAM,EADtG;AAGA,WAAOF,2BAAP;AACD,GAPI,CAAP;AAQD","file":"name.js","sourcesContent":["import log from 'loglevel';\nimport { sanitizeFilename } from '../../utils';\nimport { inferTitle } from '../../infer';\nimport { DEFAULT_APP_NAME } from '../../constants';\n\nfunction tryToInferName({ name, targetUrl }) {\n  // .length also checks if its the commanderJS function or a string\n  if (name && name.length > 0) {\n    return Promise.resolve(name);\n  }\n\n  return inferTitle(targetUrl)\n    .then((pageTitle) => pageTitle || DEFAULT_APP_NAME)\n    .catch((error) => {\n      log.warn(\n        `Unable to automatically determine app name, falling back to '${DEFAULT_APP_NAME}'. Reason: ${error}`,\n      );\n      return DEFAULT_APP_NAME;\n    });\n}\n\nexport default function({ platform, name, targetUrl }) {\n  return tryToInferName({ name, targetUrl }).then((result) =>\n    sanitizeFilename(platform, result),\n  );\n}\n"]}